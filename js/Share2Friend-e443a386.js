import{_ as p,S as v,C as _,ak as f,ao as k,ap as g}from"./common-e61c72ea.js";import{w as y,x as E}from"./other-b5b79424.js";import"./vendor-54a376b9.js";const B=""+new URL("../assets/water-3485f51a.png",import.meta.url).href;const N={name:"Share2Friend",components:{Search:v,Check:_},props:{},computed:{},data(){return{isCreateChat:!1,searchKey:"",indexOffsetTop:{},currentFixedIndicator:"",currentFixedIndicatorTop:0,friends:{all:{},recent:[],eachOther:[]},selectFriends:[],friendsSort:{},searchResult:[]}},watch:{searchKey(l){let s=this.$clone(this.friends.all);s.map(n=>{this.selectFriends.find(i=>i.id===n.id)&&(n.select=!0)}),this.searchResult=s.filter(n=>n.name.includes(l)||n.account.includes(l))}},created(){this.getFriends()},mounted(){document.querySelectorAll(".index").forEach(c=>{this.indexOffsetTop[c.children[0].innerText]=c.offsetTop});let s=document.querySelectorAll(".item"),i=document.querySelector(".item:nth-child(2)").clientHeight,e=document.querySelector(".indicator"),o=e.offsetTop,u="rgb(143, 143, 158)";e.addEventListener("touchstart",c=>{let t=(c.touches[0].pageY-o)/i;t=Math.floor(t),a(t),this.currentFixedIndicatorTop=c.touches[0].pageY-28+"px"}),e.addEventListener("touchmove",c=>{let V=c.touches[0].pageY-o;this.currentFixedIndicatorTop=c.touches[0].pageY-28+"px";let t=V/i;t=Math.floor(t),t>=0&&t<27&&a(t)}),e.addEventListener("touchend",c=>this.currentFixedIndicator="");let a=c=>{s.forEach((V,t)=>{V.style.color=u}),s[c].style.color="#fff",this.currentFixedIndicator=s[c].innerText,this.goto(s[c])}},methods:{clear(){this.searchKey=""},toggleSelect(l){for(let e=0;e<this.friends.recent.length;e++){let o=this.friends.recent[e];if(o.name===l.name){o.select=!o.select;break}}for(let e=0;e<this.friends.eachOther.length;e++){let o=this.friends.eachOther[e];if(o.name===l.name){o.select=!o.select;break}}let s=!1,n=Object.keys(this.friendsSort);for(let e=0;e<n.length;e++){let o=n[e];for(let u=0;u<this.friendsSort[o].length;u++){let a=this.friendsSort[o][u];if(a.name===l.name){a.select=!a.select,s=!0;break}}if(s)break}let i=this.selectFriends.findIndex(e=>e.name===l.name);i!==-1?(l.select=!1,this.selectFriends.splice(i,1)):(l.select=!0,this.selectFriends.push(l))},async getFriends(){let l=await f();l.code===this.SUCCESS&&(this.friends=l.data,this.friends.all=this.friends.all.sort((s,n)=>s.pinyin<n.pinyin?-1:s.pinyin>n.pinyin?1:0),this.friends.all.map(s=>{this.friendsSort[s.pinyin]?this.friendsSort[s.pinyin].push(s):this.friendsSort[s.pinyin]=[s]}))},goto(l){let s=this.$refs.list,n;l.dataset.index?n="top":n=l.innerText,document.querySelector(`.${n}`)&&(s.scrollTop=document.querySelector(`.${n}`).offsetTop-100)},scroll(l){let s=l.target.scrollTop+110,n=null;for(const i in this.indexOffsetTop)this.indexOffsetTop[i]<s&&(n=i);this.currentFixedIndicator=n}}},d=l=>(Vue.pushScopeId("data-v-3532215b"),l=l(),Vue.popScopeId(),l),S={class:"Share2Friend"},b=d(()=>Vue.createElementVNode("span",{class:"f16"},"私信给",-1)),x={class:"search"},C={key:0,class:"search-select-friends"},F={class:"wrapper"},T=["src","onClick"],w={key:1,class:"search-icon",src:k,alt:""},K={key:0,class:"list"},I=["onClick"],D=["src"],O={class:"desc"},U={class:"name"},L={key:0},R={style:{color:"#ffd800"}},Y={key:1},q={key:0,class:"account"},P={key:0},z={style:{color:"#ffd800"}},H={key:1},M={key:1,class:"no-result"},j=d(()=>Vue.createElementVNode("img",{src:E,alt:""},null,-1)),A=d(()=>Vue.createElementVNode("span",{class:"n1"},"搜索结果为空",-1)),G=d(()=>Vue.createElementVNode("span",{class:"n2"},"没有搜索到相关的联系人",-1)),J=[j,A,G],Q={class:"list"},W=d(()=>Vue.createElementVNode("span",null,"已加入的群聊",-1)),X=d(()=>Vue.createElementVNode("div",{class:"title"},"最近聊天",-1)),Z=["onClick"],$=["src"],ee=d(()=>Vue.createElementVNode("div",{class:"title"},"互关好友",-1)),te=["onClick"],se=["src"],le=d(()=>Vue.createElementVNode("div",{class:"title"},"全部",-1)),oe=["onClick"],ne=["src"],ce={key:0,class:"share2friend"},re=d(()=>Vue.createElementVNode("div",{class:"comment"},[Vue.createElementVNode("textarea",{placeholder:"有什么想和好友说的..."}),Vue.createElementVNode("img",{class:"poster",src:g,alt:""})],-1)),ae={class:"wrapper"},ie={key:0,class:"create-chat"},de=d(()=>Vue.createElementVNode("span",null,"创建群聊",-1)),ue=Vue.createStaticVNode('<div class="indicator-ctn" data-v-3532215b><div class="indicator" data-v-3532215b><div class="item" data-index="top" data-v-3532215b>#</div><div class="item" data-v-3532215b>A</div><div class="item" data-v-3532215b>B</div><div class="item" data-v-3532215b>C</div><div class="item" data-v-3532215b>D</div><div class="item" data-v-3532215b>E</div><div class="item" data-v-3532215b>F</div><div class="item" data-v-3532215b>G</div><div class="item" data-v-3532215b>H</div><div class="item" data-v-3532215b>I</div><div class="item" data-v-3532215b>J</div><div class="item" data-v-3532215b>K</div><div class="item" data-v-3532215b>L</div><div class="item" data-v-3532215b>M</div><div class="item" data-v-3532215b>N</div><div class="item" data-v-3532215b>O</div><div class="item" data-v-3532215b>P</div><div class="item" data-v-3532215b>Q</div><div class="item" data-v-3532215b>R</div><div class="item" data-v-3532215b>S</div><div class="item" data-v-3532215b>T</div><div class="item" data-v-3532215b>U</div><div class="item" data-v-3532215b>V</div><div class="item" data-v-3532215b>W</div><div class="item" data-v-3532215b>X</div><div class="item" data-v-3532215b>Y</div><div class="item" data-v-3532215b>Z</div></div></div>',1),Ve=d(()=>Vue.createElementVNode("img",{src:B,alt:""},null,-1));function me(l,s,n,i,e,o){const u=Vue.resolveComponent("BaseHeader"),a=Vue.resolveComponent("Check"),c=Vue.resolveComponent("dy-back"),V=Vue.resolveComponent("dy-button");return Vue.openBlock(),Vue.createElementBlock("div",S,[Vue.createVNode(u,{backImg:"close",style:{"z-index":"7"}},{center:Vue.withCtx(()=>[b]),bottom:Vue.withCtx(()=>[Vue.createElementVNode("div",x,[e.selectFriends.length?(Vue.openBlock(),Vue.createElementBlock("div",C,[Vue.createElementVNode("div",F,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(e.selectFriends,t=>(Vue.openBlock(),Vue.createElementBlock("img",{src:l.$imgPreview(t.avatar),onClick:r=>o.toggleSelect(t)},null,8,T))),256))])])):(Vue.openBlock(),Vue.createElementBlock("img",w)),Vue.withDirectives(Vue.createElementVNode("input",{type:"text",placeholder:"搜索","onUpdate:modelValue":s[0]||(s[0]=t=>e.searchKey=t)},null,512),[[Vue.vModelText,e.searchKey]]),e.searchKey?(Vue.openBlock(),Vue.createElementBlock("img",{key:2,onClick:s[1]||(s[1]=(...t)=>o.clear&&o.clear(...t)),class:"clear",src:y})):Vue.createCommentVNode("",!0)])]),_:1}),Vue.withDirectives(Vue.createElementVNode("div",{class:"is-search",style:Vue.normalizeStyle({height:e.selectFriends.length&&e.searchResult.length?"calc(100% - 272rem)":"calc(100% - 112rem)"})},[e.searchResult.length?(Vue.openBlock(),Vue.createElementBlock("div",K,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(e.searchResult,t=>(Vue.openBlock(),Vue.createElementBlock("div",{class:"local-row",onClick:r=>{o.toggleSelect(t),e.searchKey=""}},[Vue.createVNode(a,{mode:"red",modelValue:t.select,"onUpdate:modelValue":r=>t.select=r},null,8,["modelValue","onUpdate:modelValue"]),Vue.createElementVNode("img",{src:l.$imgPreview(t.avatar),alt:""},null,8,D),Vue.createElementVNode("div",O,[Vue.createElementVNode("span",U,[t.name.indexOf(e.searchKey)>-1?(Vue.openBlock(),Vue.createElementBlock("span",L,[Vue.createTextVNode(Vue.toDisplayString(t.name.substr(0,t.name.indexOf(e.searchKey))),1),Vue.createElementVNode("span",R,Vue.toDisplayString(e.searchKey),1),Vue.createTextVNode(Vue.toDisplayString(t.name.substr(t.name.indexOf(e.searchKey)+e.searchKey.length)),1)])):(Vue.openBlock(),Vue.createElementBlock("span",Y,Vue.toDisplayString(t.name),1))]),t.account?(Vue.openBlock(),Vue.createElementBlock("span",q,[Vue.createTextVNode(" 抖音号： "),t.account.indexOf(e.searchKey)>-1?(Vue.openBlock(),Vue.createElementBlock("span",P,[Vue.createTextVNode(Vue.toDisplayString(t.account.substr(0,t.account.indexOf(e.searchKey))),1),Vue.createElementVNode("span",z,Vue.toDisplayString(e.searchKey),1),Vue.createTextVNode(Vue.toDisplayString(t.account.substr(t.account.indexOf(e.searchKey)+e.searchKey.length)),1)])):(Vue.openBlock(),Vue.createElementBlock("span",H,Vue.toDisplayString(t.account),1))])):Vue.createCommentVNode("",!0)])],8,I))),256))])):(Vue.openBlock(),Vue.createElementBlock("div",M,J))],4),[[Vue.vShow,e.searchKey]]),Vue.createElementVNode("div",{ref:"list",style:Vue.normalizeStyle({paddingBottom:e.selectFriends.length?"160rem":0}),class:"content",onScroll:s[4]||(s[4]=(...t)=>o.scroll&&o.scroll(...t))},[Vue.createElementVNode("div",Q,[Vue.createElementVNode("div",{class:"row",onClick:s[2]||(s[2]=t=>l.$nav("/message/joined-group-chat"))},[W,Vue.createVNode(c,{scale:.7,direction:"right"})]),X,(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(e.friends.recent,t=>(Vue.openBlock(),Vue.createElementBlock("div",{class:"local-row",onClick:r=>o.toggleSelect(t)},[Vue.createVNode(a,{mode:"red",modelValue:t.select,"onUpdate:modelValue":r=>t.select=r},null,8,["modelValue","onUpdate:modelValue"]),Vue.createElementVNode("img",{src:l.$imgPreview(t.avatar),alt:""},null,8,$),Vue.createElementVNode("span",null,Vue.toDisplayString(t.name),1)],8,Z))),256)),ee,(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(e.friends.eachOther,t=>(Vue.openBlock(),Vue.createElementBlock("div",{class:"local-row",onClick:r=>o.toggleSelect(t)},[Vue.createVNode(a,{mode:"red",modelValue:t.select,"onUpdate:modelValue":r=>t.select=r},null,8,["modelValue","onUpdate:modelValue"]),Vue.createElementVNode("img",{src:l.$imgPreview(t.avatar),alt:""},null,8,se),Vue.createElementVNode("span",null,Vue.toDisplayString(t.name),1)],8,te))),256)),le,(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(e.friendsSort,(t,r)=>(Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createElementVNode("div",{class:Vue.normalizeClass([r==="#"?"top":r,"title"])},[Vue.createElementVNode("span",null,Vue.toDisplayString(r),1)],2),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(t,m=>(Vue.openBlock(),Vue.createElementBlock("div",{class:"local-row",onClick:h=>o.toggleSelect(m)},[Vue.createVNode(a,{mode:"red",modelValue:m.select,"onUpdate:modelValue":h=>m.select=h},null,8,["modelValue","onUpdate:modelValue"]),Vue.createElementVNode("img",{src:l.$imgPreview(m.avatar),alt:""},null,8,ne),Vue.createElementVNode("span",null,Vue.toDisplayString(m.name),1)],8,oe))),256))]))),256))]),e.selectFriends.length&&e.searchResult.length?(Vue.openBlock(),Vue.createElementBlock("div",ce,[re,Vue.createElementVNode("div",ae,[e.selectFriends.length>1?(Vue.openBlock(),Vue.createElementBlock("div",ie,[Vue.createVNode(a,{mode:"red",modelValue:e.isCreateChat,"onUpdate:modelValue":s[3]||(s[3]=t=>e.isCreateChat=t)},null,8,["modelValue"]),de])):Vue.createCommentVNode("",!0),Vue.createVNode(V,{type:"primary"},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(e.selectFriends.length>1?"分别发送":"发送"),1)]),_:1})])])):Vue.createCommentVNode("",!0)],36),ue,e.currentFixedIndicator?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:"hover",style:Vue.normalizeStyle({top:e.currentFixedIndicatorTop}),ref:"hover"},[Ve,Vue.createElementVNode("span",null,Vue.toDisplayString(e.currentFixedIndicator),1)],4)):Vue.createCommentVNode("",!0)])}const _e=p(N,[["render",me],["__scopeId","data-v-3532215b"]]);export{_e as default};
